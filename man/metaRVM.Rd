% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metaRVM.R
\name{metaRVM}
\alias{metaRVM}
\title{Run MetaRVM Epidemic Simulation}
\usage{
metaRVM(config_input)
}
\arguments{
\item{config_input}{Configuration input in one of three formats:
\itemize{
\item Character string: File path to YAML configuration file
\item MetaRVMConfig object: Pre-initialized configuration object
\item Named list: Parsed configuration data from \code{\link{parse_config}}
}}
}
\value{
Returns a \code{\link{MetaRVMResults}} object containing:
\describe{
\item{results}{Formatted data.table with columns:}
\itemize{
\item \code{date}: Calendar date (Date class)
\item \code{age}: Age category (e.g., "0-4", "5-11", "18-49")
\item \code{race}: Race/ethnicity category
\item \code{zone}: Geographic zone identifier
\item \code{disease_state}: Compartment name (S, E, I_asymp, H, etc.)
\item \code{value}: Population count in compartment
\item \code{instance}: Simulation instance number
}
\item{config}{Original MetaRVMConfig object}
\item{run_info}{Simulation metadata including date range, instance count}
}

The returned object supports method chaining for analysis:
\itemize{
\item \code{subset_data()}: Filter by demographics, disease states, dates
\item \code{summarize()}: Aggregate across demographic categories with statistics
\item \code{plot()}: Create time series visualizations (via method chaining)
}
}
\description{
Executes a meta-population compartmental epidemic model simulation using specified
configuration parameters. The function runs multiple simulation instances with
stochastic parameter variations and returns formatted results with calendar dates
and demographic attributes for comprehensive analysis and visualization. Under the hood,
it calls \code{\link{meta_sim}} function after parsing the inputs.
}
\details{
The MetaRVM simulation implements a meta-population SEIRD (Susceptible-Exposed-Infected-Recovered-Dead)
compartmental model with additional complexity for asymptomatic and presymptomatic infections,
hospitalization states, and vaccination dynamics. The model accounts for:

\strong{Compartmental Structure:}
\itemize{
\item \strong{S}: Susceptible individuals
\item \strong{E}: Exposed (incubating) individuals
\item \strong{I_asymp}: Asymptomatic infectious individuals
\item \strong{I_presymp}: Presymptomatic infectious individuals
\item \strong{I_symp}: Symptomatic infectious individuals
\item \strong{H}: Hospitalized individuals
\item \strong{R}: Recovered individuals
\item \strong{D}: Dead individuals
\item \strong{P}: Protected/vaccinated individuals
}

\strong{Disease Parameters:}
The model uses the following key parameters (can be stochastic across instances):
\itemize{
\item \code{ts}: Transmission rate for symptomatic individuals
\item \code{tv}: Transmission rate for vaccinated individuals
\item \code{ve}: Vaccine effectiveness
\item \code{de, dp, da, ds, dh, dr}: Duration parameters for disease states
\item \code{pea, psr, phr}: Proportion parameters for state transitions
}

\strong{Simulation Process:}
For each simulation instance, the function:
\enumerate{
\item Initializes population compartments from configuration
\item Applies instance-specific stochastic parameter values
\item Runs the ODE solver (\code{\link{meta_sim}}) with specified time steps
\item Collects output for all time points and populations
\item Combines results across all instances
\item Formats output with calendar dates and demographic information
\item Returns structured MetaRVMResults object for analysis
}
}
\section{Configuration Requirements}{

The configuration must include:
\itemize{
\item \strong{Population data}: Initial compartment values, demographic mapping
\item \strong{Disease parameters}: Transmission rates, durations, probabilities
\item \strong{Contact matrices}: Weekday/weekend and day/night mixing patterns
\item \strong{Simulation settings}: Start date, length, number of instances
\item \strong{Vaccination schedule}: Time-varying vaccination rates
}
}

\examples{
example_config <- system.file("extdata", "example_config.yaml", package = "MetaRVM")
# Basic usage with YAML configuration file
results <- metaRVM(example_config)

# Print summary
results

# Access formatted data directly
head(results$results)

# Method chaining for analysis and visualization
results$summarize(
  group_by = c("age", "race"),
  stats = c("median", "quantile"),
  disease_states = c("H", "D")
)$plot()

# Subset and analyze specific populations
subset_results <- results$subset_data(
  age = c("65+"),
  disease_states = c("H", "D"),
  date_range = c(as.Date("2024-01-01"), as.Date("2024-03-01"))
)

# Using with pre-parsed configuration
config_obj <- parse_config(example_config, return_object = TRUE)
results <- metaRVM(config_obj)

# Accessing run metadata
results$run_info$n_instances
results$run_info$date_range



}
\references{
Fadikar, A., et al. "Developing and deploying a use-inspired metapopulation modeling framework for detailed tracking of stratified health outcomes"
}
\seealso{
\code{\link{parse_config}} for configuration file parsing
\code{\link{MetaRVMConfig}} for configuration object class
\code{\link{MetaRVMResults}} for results object and analysis methods
\code{\link{format_metarvm_output}} for output formatting details
\code{\link{meta_sim}} for the underlying ODE simulation engine
}
\author{
Arindam Fadikar, Charles Macal, Ignacio Martinez-Moyano, Jonathan Ozik
}
