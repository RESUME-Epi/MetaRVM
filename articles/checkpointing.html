<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Checkpointing in MetaRVM • MetaRVM</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Checkpointing in MetaRVM">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MetaRVM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/yaml-configuration.html">Model Configurations</a></li>
    <li><a class="dropdown-item" href="../articles/running-a-simulation.html">Running Simulation</a></li>
    <li><a class="dropdown-item" href="../articles/checkpointing.html">Checkpointing and Restoring</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RESUME-Epi/MetaRVM" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Checkpointing in MetaRVM</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RESUME-Epi/MetaRVM/blob/main/vignettes/checkpointing.Rmd" class="external-link"><code>vignettes/checkpointing.Rmd</code></a></small>
      <div class="d-none name"><code>checkpointing.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates how to configure and use the checkpointing
functionality in MetaRVM with examples. Checkpointing allows to store
the model state at specific time points during the simulation, allowing
one to resume runs from saved states.</p>
</div>
<div class="section level2">
<h2 id="how-checkpointing-works">How Checkpointing Works<a class="anchor" aria-label="anchor" href="#how-checkpointing-works"></a>
</h2>
<p>MetaRVM’s checkpointing system is configured through the YAML
configuration file.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Saving checkpoints</strong>: During simulation, the complete
state (compartments, parameters, time step) is saved to disk at
specified dates</li>
<li>
<strong>Restoring from checkpoints</strong>: A new simulation can be
initialized from a previously saved checkpoint, continuing from that
point forward</li>
<li>
<strong>Flexible scheduling</strong>: Exact dates when checkpoints
should be saved are to be supplied, or by default it will checkpoint at
the end-of-simulation date.</li>
</ol>
<div class="section level3">
<h3 id="configuration-parameters">Configuration Parameters<a class="anchor" aria-label="anchor" href="#configuration-parameters"></a>
</h3>
<p>The checkpointing system uses three main configuration options in the
<code>simulation_config</code> section:</p>
<ul>
<li>
<strong><code>checkpoint_dir</code></strong>: Directory where
checkpoint files will be saved (created if it doesn’t exist)</li>
<li>
<strong><code>checkpoint_dates</code></strong>: (Optional) List of
specific dates when checkpoints should be saved</li>
<li>
<strong><code>restore_from</code></strong>: (Optional) Path to a
checkpoint file to resume from</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>For the purpose of this example, we will set the checkpointed
directory to be a temporary directory, and will create a temporary yaml
configuration file based on a template.</p>
<div class="section level3">
<h3 id="set-up">Set Up<a class="anchor" aria-label="anchor" href="#set-up"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://RESUME-Epi.github.io/MetaRVM/">MetaRVM</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>odin.verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the example configuration file</span></span>
<span><span class="va">example_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"example_config_checkpoint.yaml"</span>, </span>
<span>                              package <span class="op">=</span> <span class="st">"MetaRVM"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a temporary directory for checkpoints</span></span>
<span><span class="va">checkpoint_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Checkpoint directory:"</span>, <span class="va">checkpoint_dir</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Checkpoint directory: /tmp/RtmplHGwBy</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-a-configuration-with-checkpointing">Create a Configuration with Checkpointing<a class="anchor" aria-label="anchor" href="#create-a-configuration-with-checkpointing"></a>
</h3>
<p>Now copy the example configuration and modify it to add
checkpointing:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Read the example configuration</span></span>
<span><span class="va">yml</span> <span class="op">&lt;-</span> <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/read_yaml.html" class="external-link">read_yaml</a></span><span class="op">(</span><span class="va">example_config</span><span class="op">)</span></span>
<span><span class="va">yml_tmp</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">yml</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Assign checkpoint directory</span></span>
<span><span class="va">yml_tmp</span><span class="op">$</span><span class="va">simulation_config</span><span class="op">$</span><span class="va">checkpoint_dir</span> <span class="op">&lt;-</span> <span class="va">checkpoint_dir</span></span>
<span></span>
<span><span class="co"># Create a temporary config</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>tmpdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">example_config</span><span class="op">)</span>, fileext <span class="op">=</span> <span class="st">".yaml"</span><span class="op">)</span></span>
<span><span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/write_yaml.html" class="external-link">write_yaml</a></span><span class="op">(</span><span class="va">yml_tmp</span>, <span class="va">temp_config</span><span class="op">)</span></span>
<span><span class="va">temp_config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="va">temp_config</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="run-simulation-with-checkpoints">Run Simulation with Checkpoints<a class="anchor" aria-label="anchor" href="#run-simulation-with-checkpoints"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Run the simulation</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metaRVM.html">metaRVM</a></span><span class="op">(</span><span class="va">temp_config</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required namespace: pkgbuild</span></span>
<span></span>
<span><span class="co"># Check what checkpoint files were created</span></span>
<span><span class="va">checkpoint_files</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">checkpoint_dir</span>, </span>
<span>                               pattern <span class="op">=</span> <span class="st">"^chk_.*\\.Rda$"</span>,</span>
<span>                               full.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">checkpoint_files</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">file</span> <span class="kw">in</span> <span class="va">checkpoint_files</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  -"</span>, <span class="va">file</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"  (No checkpoint files found)\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt;   - chk_2024-12-29_1.Rda</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="examine-the-results">Examine the Results<a class="anchor" aria-label="anchor" href="#examine-the-results"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of instances:"</span>, <span class="va">results</span><span class="op">$</span><span class="va">run_info</span><span class="op">$</span><span class="va">n_instances</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of instances: 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Date range:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">run_info</span><span class="op">$</span><span class="va">date_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"to"</span>, </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">run_info</span><span class="op">$</span><span class="va">date_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Date range: 2024-10-01 to 2024-12-29</span></span>
<span></span>
<span><span class="co"># Display first few rows</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">results</span><span class="op">$</span><span class="va">results</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;           date    age   race   zone disease_state        value instance</span></span>
<span><span class="co">#&gt;         &lt;Date&gt; &lt;char&gt; &lt;char&gt; &lt;char&gt;        &lt;char&gt;        &lt;num&gt;    &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1: 2024-10-01   0-17      A     11             D 2.252583e-04        1</span></span>
<span><span class="co">#&gt;  2: 2024-10-01   0-17      A     11             E 1.305178e+01        1</span></span>
<span><span class="co">#&gt;  3: 2024-10-01   0-17      A     11             H 2.304447e-01        1</span></span>
<span><span class="co">#&gt;  4: 2024-10-01   0-17      A     11         I_all 2.731688e+01        1</span></span>
<span><span class="co">#&gt;  5: 2024-10-01   0-17      A     11       I_asymp 3.227854e-01        1</span></span>
<span><span class="co">#&gt;  6: 2024-10-01   0-17      A     11         I_eff 2.647304e+01        1</span></span>
<span><span class="co">#&gt;  7: 2024-10-01   0-17      A     11     I_presymp 7.531660e-01        1</span></span>
<span><span class="co">#&gt;  8: 2024-10-01   0-17      A     11        I_symp 2.624093e+01        1</span></span>
<span><span class="co">#&gt;  9: 2024-10-01   0-17      A     11             P 3.074200e+04        1</span></span>
<span><span class="co">#&gt; 10: 2024-10-01   0-17      A     11             R 1.148308e+01        1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="resume-from-a-checkpoint">Resume from a Checkpoint<a class="anchor" aria-label="anchor" href="#resume-from-a-checkpoint"></a>
</h3>
<p>We’ll create a new configuration that restores from the checkpoint.
We need to provide the checkpoint file name, and a start date which
should be the next day of the end date in the previous run.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the first checkpoint file</span></span>
<span><span class="va">checkpoint_files_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">checkpoint_dir</span>, </span>
<span>                                    pattern <span class="op">=</span> <span class="st">"^chk_.*\\.Rda$"</span>,</span>
<span>                                    full.names <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">checkpoint_files_full</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">checkpoint_to_restore</span> <span class="op">&lt;-</span> <span class="va">checkpoint_files_full</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">checkpoint_to_restore</span>, <span class="st">"\n\n"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">new_start_date</span> <span class="op">&lt;-</span> <span class="st">"12/30/2024"</span></span>
<span>  <span class="va">yml_tmp</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">yml</span><span class="op">)</span></span>
<span>  <span class="va">yml_tmp</span><span class="op">$</span><span class="va">simulation_config</span><span class="op">$</span><span class="va">start_date</span> <span class="op">&lt;-</span> <span class="va">new_start_date</span></span>
<span>  <span class="va">yml_tmp</span><span class="op">$</span><span class="va">simulation_config</span><span class="op">$</span><span class="va">restore_from</span> <span class="op">&lt;-</span> <span class="va">checkpoint_to_restore</span></span>
<span>  <span class="va">yml_tmp</span><span class="op">$</span><span class="va">population_data</span><span class="op">$</span><span class="va">initialization</span> <span class="op">&lt;-</span> <span class="cn">NULL</span> <span class="co"># ensure that we don't want to reinitialize the population from the initialization file</span></span>
<span>  </span>
<span>  <span class="va">temp_config_resume</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>tmpdir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">dirname</a></span><span class="op">(</span><span class="va">example_config</span><span class="op">)</span>,fileext <span class="op">=</span> <span class="st">".yaml"</span><span class="op">)</span></span>
<span>  <span class="fu">yaml</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/yaml/man/write_yaml.html" class="external-link">write_yaml</a></span><span class="op">(</span><span class="va">yml_tmp</span>, <span class="va">temp_config_resume</span><span class="op">)</span></span>
<span>  <span class="va">temp_config_resume</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/normalizePath.html" class="external-link">normalizePath</a></span><span class="op">(</span><span class="va">temp_config_resume</span><span class="op">)</span></span>
<span>  </span>
<span>  </span>
<span>  <span class="co"># Run the resumed simulation</span></span>
<span>  <span class="va">results_resumed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/metaRVM.html">metaRVM</a></span><span class="op">(</span><span class="va">temp_config_resume</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Number of instances:"</span>, <span class="va">results_resumed</span><span class="op">$</span><span class="va">run_info</span><span class="op">$</span><span class="va">n_instances</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Date range:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">results_resumed</span><span class="op">$</span><span class="va">run_info</span><span class="op">$</span><span class="va">date_range</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, <span class="st">"to"</span>, </span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">results_resumed</span><span class="op">$</span><span class="va">run_info</span><span class="op">$</span><span class="va">date_range</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"No checkpoint files found to resume from.\n"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; /tmp/RtmplHGwBy/chk_2024-12-29_1.Rda </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of instances: 1 </span></span>
<span><span class="co">#&gt; Date range: 2024-12-30 to 2025-03-29</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plot">Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">run1_hosp_sum</span> <span class="op">&lt;-</span> <span class="va">results</span><span class="op">$</span><span class="va">results</span><span class="op">[</span><span class="va">disease_state</span> <span class="op">==</span> <span class="st">"H"</span>, <span class="fu">.</span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"date"</span><span class="op">]</span></span>
<span><span class="va">run2_hosp_sum</span> <span class="op">&lt;-</span> <span class="va">results_resumed</span><span class="op">$</span><span class="va">results</span><span class="op">[</span><span class="va">disease_state</span> <span class="op">==</span> <span class="st">"H"</span>, <span class="fu">.</span><span class="op">(</span>total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"date"</span><span class="op">]</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">run1_hosp_sum</span>, <span class="va">run2_hosp_sum</span><span class="op">)</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2024-12-29"</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Hospitalizations"</span>, x <span class="op">=</span> <span class="st">"Date"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="checkpointing_files/figure-html/plot-1.png" class="r-plt" width="768" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="understanding-checkpoint-files">Understanding Checkpoint Files<a class="anchor" aria-label="anchor" href="#understanding-checkpoint-files"></a>
</h2>
<p>When checkpointing is enabled, MetaRVM creates checkpoint files with
the following naming convention:</p>
<pre><code><span><span class="va">chk_YYYY</span><span class="op">-</span><span class="va">MM</span><span class="op">-</span><span class="va">DD_N.Rda</span></span></code></pre>
<p>Where: - <code>YYYY-MM-DD</code> is the checkpoint date -
<code>N</code> is the simulation instance number (1 to nsim)</p>
<p>For more information on configuring MetaRVM simulations, see the <a href="yaml-configuration.html">YAML Configuration</a> vignette.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Arindam Fadikar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
